<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="utf-8">    
    <script>
      const gs = google.script;

      function success(output) {
          console.log("got values from user");
          gs.host.close();
      }
      
      function failure(error) {
          console.log("error in Folio form: " + error);
          gs.host.close();
      }

      function sendForm() { 
          console.log("sending form");
          const url = document.getElementById("url").value;
          const tenant_id = document.getElementById("tenant_id").value;
          const user = document.getElementById("user").value;
          const password = document.getElementById("password").value;
          gs.run.withSuccessHandler(success).withFailureHandler(failure).saveFolioInfo(url, tenant_id, user, password);
      }
    </script>
    <?!= include('stylesheet'); ?>
  </head>
  <body>
    <div class="explanatory-text">
      <p>Boffo needs some information so that it can contact the FOLIO server
        and create an API token. Your FOLIO login and password will <b>not</b>
        be stored; only the token will be stored.</p>
    </div>
    <div class="form">
      <form id="form" onsubmit="sendForm(); return false;">
        <label for="name" class="label">Institute's FOLIO API URL:</label>
        <br>
        <input name="url" id="url" type="text" class="field"
               value="<?!= getProp('boffo_folio_url'); ?>" required>
        <br>
        <label for="password" class="label">Institute's FOLIO tenant id:</label>
        <br>
        <input name="tenant_id" id="tenant_id" type="text" class="field"
               value="<?!= getProp('boffo_folio_tenant_id'); ?>" required>
        <br>
        <label for="name" class="label">Your FOLIO user name:</label>
        <br>
        <input name="user" id="user" type="text" class="field"
               required>
        <br>
        <label for="password" class="label">Your user FOLIO password:</label>
        <br>
        <input name="password" id="password" type="password" class="field"
               required>
        <br>
        <input type="submit" class="button">
      </form>
    </div>
  </body>
  
</html>
